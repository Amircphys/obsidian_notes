Уровни:
![[Pasted image 20250416180102.png]]
Ниже перечислены основные классы, определенные модулем, вместе с их функциями.
	○ **Loggers** - предоставляют интерфейс, который напрямую использует код приложения.
	○ **Handlers** - отправляют записи журнала (созданного регистраторами) в соответствующее место назначения.
	○ **Filters** - предоставляют более детальное средство для определения того, какие записи журнала выводить.
	○ **Formatters** - определяют макет записей журнала в конечном выводе.

### Конспект: Логирование в Python

#### 1. **Базовое использование модуля `logging`**
```python
import logging

# Уровни логирования (по возрастанию важности): DEBUG < INFO < WARNING < ERROR < CRITICAL
logging.debug("Это сообщение уровня DEBUG")  # Не будет выведено (по умолчанию уровень = WARNING)
logging.info("Это сообщение уровня INFO")    # Не будет выведено
logging.warning("Это предупреждение!")
logging.error("Это ошибка!")
logging.critical("Критическая ошибка!")
```

#### 2. **Настройка уровня и формата**
```python
import logging

# Настройка уровня логирования и формата
logging.basicConfig(
    level=logging.DEBUG,  # Теперь видны все сообщения от DEBUG и выше
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    datefmt='%Y-%m-%d %H:%M:%S'
)

logging.info("Теперь это сообщение видно!")
```

#### 3. **Запись логов в файл**
```python
import logging

logging.basicConfig(
    filename='app.log',        # Логи сохраняются в файл
    filemode='a',               # 'a' - дописывать, 'w' - перезаписать
    level=logging.INFO,
    format='%(levelname)s - %(message)s'
)

logging.info("Сообщение записано в файл")
```

---

### Продвинутое логирование

#### 4. **Логгеры, обработчики (Handlers), форматеры**
```python
import logging

# Создание кастомного логгера
logger = logging.getLogger("my_logger")
logger.setLevel(logging.DEBUG)

# Создание обработчиков
console_handler = logging.StreamHandler()  # Вывод в консоль
file_handler = logging.FileHandler("advanced.log")  # Запись в файл

# Настройка уровней для обработчиков
console_handler.setLevel(logging.WARNING)
file_handler.setLevel(logging.DEBUG)

# Создание форматеров
console_format = logging.Formatter('%(levelname)s - %(message)s')
file_format = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')

# Привязка форматеров к обработчикам
console_handler.setFormatter(console_format)
file_handler.setFormatter(file_format)

# Добавление обработчиков к логгеру
logger.addHandler(console_handler)
logger.addHandler(file_handler)

# Пример использования
logger.debug("Это DEBUG-сообщение (только в файл)")
logger.warning("Это WARNING-сообщение (в файл и консоль)")
```

#### 5. **Ротация лог-файлов**
```python
from logging.handlers import RotatingFileHandler, TimedRotatingFileHandler

# Ротация по размеру файла (макс. 1 MB, сохранять 3 бэкапа)
rotating_handler = RotatingFileHandler(
    "rotating.log", maxBytes=1e6, backupCount=3
)

# Ротация по времени (каждый день в полночь)
timed_handler = TimedRotatingFileHandler(
    "timed.log", when="midnight", interval=1
)
```

#### 6. **Логирование исключений**
```python
try:
    1 / 0
except ZeroDivisionError:
    logger.exception("Произошло исключение:")  # Автоматически добавляет traceback
```

#### 7. **Фильтрация сообщений**
```python
class CustomFilter(logging.Filter):
    def filter(self, record):
        return "SECRET" not in record.getMessage()  # Игнорировать сообщения с "SECRET"

logger.addFilter(CustomFilter())
logger.info("Это сообщение с SECRET")  # Не будет записано
```

---

### Best Practices
- **Не используйте root-логгер** в больших проектах — создавайте именованные логгеры.
- **Разделяйте логи** по уровням и назначению (например, отдельные файлы для ошибок и дебага).
- **Используйте структурированные логи** (JSON-формат) для интеграции с системами мониторинга.
- **Конфигурируйте логирование через файлы** (например, `logging.config.dictConfig()`).

#### Пример конфигурации через словарь:
```python
import logging.config

config = {
    "version": 1,
    "formatters": {
        "detailed": {
            "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
        }
    },
    "handlers": {
        "console": {
            "class": "logging.StreamHandler",
            "level": "INFO",
            "formatter": "detailed"
        }
    },
    "root": {
        "level": "DEBUG",
        "handlers": ["console"]
    }
}

logging.config.dictConfig(config)
```