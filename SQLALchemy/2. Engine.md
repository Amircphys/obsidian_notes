
**Устанавливаем подключение — создаём Engine**  
(Этот раздел актуален и для Core, и для ORM!)

**Что такое Engine?**  
`Engine` — это главный объект, через который ваше приложение взаимодействует с базой данных. Он:  
- Управляет подключениями к базе (создаёт их и хранит в «пуле»).  
- Создаётся один раз для конкретной базы и используется глобально.  

**Как создать Engine?**  
Пример для SQLite (база в памяти):  
```python
from sqlalchemy import create_engine

# Создаём Engine. echo=True включает вывод SQL-запросов в консоль.
engine = create_engine("sqlite+pysqlite:///:memory:", echo=True)
```  

**Разбираем URL базы данных**  
Строка подключения `"sqlite+pysqlite:///:memory:"` содержит три ключевые части:  
1. **Тип базы (диалект)** — `sqlite`.  
   - Это указывает SQLAlchemy, как работать с конкретной СУБД.  
2. **Драйвер (DBAPI)** — `pysqlite`.  
   - Библиотека Python для работы с SQLite (здесь — стандартный `sqlite3`).  
   - Если не указать, SQLAlchemy выберет драйвер сам.  
3. **Расположение базы** — `/:memory:`.  
   - База будет создана в оперативной памяти (не требует файлов на диске).  

---

**Ленивая инициализация**  
Когда вы создаёте `Engine`, он не подключается к базе сразу. Первое реальное подключение произойдёт только при первом запросе к базе. Это экономит ресурсы.  

**Логирование SQL**  
Параметр `echo=True` включает вывод всех SQL-запросов в консоль. Это удобно для отладки. Пример лога:  
```  
[SQL] SELECT ...  
[parameters: ...]
```  
(В туториале такие логи будут скрыты под спойлером [SQL]).  

---

**Почему это важно?**  
- Даже если вы используете ORM, `Engine` — основа всего.  
- Для тестов подходит SQLite в памяти (не нужно настраивать сервер).  
- В реальных проектах вместо `:memory:` укажите путь к файлу или данные для подключения к серверу (например, PostgreSQL).  

**Совет:**  
- `create_engine()` — это «стартовая точка» любого приложения на SQLAlchemy. Запомните её!  
- В следующих разделах вы узнаете, как использовать `Engine` для выполнения запросов.