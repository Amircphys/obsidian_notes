**Контейнер** — это НЕ виртуальная машина, а приложение и его зависимости упакованные в стандартизированное, изолированное, легковесное окружение.

**Что docker нам даёт?**
- Абстракция от host-системы
- Легковесное изолированное окружение
- Простое управление зависимостями
- Стандартизация описания окружения,  сборки, деплоймента

**Компоненты docker**
- Daemon
- Client
- Registry

**Daemon**
- Предоставляет API
- Управляет Docker-объектами
- Общается с другими docker daemon'ами
- Запускается на хост машине, где планируется запускать контейнеры

**Client**
- Принимает команды пользователя
- Общается по API с docker daemon’ом


**Dockerﬁle** - Текстовый файл с build инструкциями, которые декларативно описывают image

**Docker image**
- неизменяемая сущность, snapshot контейнера
- состоит из слоев(layers)
- получается из dockerﬁle путем операции build - `docker build -t imagename` .

**Часто используемые команды docker**
`docker build`
`docker run/ docker run -it --rm`
`docker pull/push`
`docker exec`
`docker attach`
`docker kill, stop, start`
`docker container ls`
`docker image ls`
`docker stats`

**PID namespace**
- Процессы внутри pid namespace'а видят только процессы из этого же namespace
- Каждый pid namespace имеет свою нумерацию процессов (начиная с 1)
- Когда процесс с pid 1 умирает, то умирает весь namespace PID namespace'ы могут быть вложенными
![[Pasted image 20241229123426.png]]

**UnionFS** - если мы один раз для одного контейнера скачали образ ubuntu, то данный образ не будет заново скачиваться, если мы его пропишем для других образов. Каждый раз когда мы что-то меняем в докерфайле то запуск будет стартовать с того места, где мы внесли изменения. Так что лучше всего помещать в конец то, что мы можем изменить

**Best practice**:
 - Слоев поменьше
 - Базовые образа полегче
 - Часто меняющееся вниз, редко наверх

