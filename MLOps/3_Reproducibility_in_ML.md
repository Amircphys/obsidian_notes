

![[Pasted image 20241029105406.png]]Проблемы воспроизводимости:
 - Не могу воспроизвести обучение модели от начала до конца
 - Не могу воспроизвести любого сделанного эксперимента

Знания о сделанных экспериментах через год:
 - Постановка задачи - в джире может быть что-то есть
 - Работа с  данными - никто не знает, на каких данных обучалась модель 
 - Обучение модели - никто не знает, какие модели пробовал обучать
 - Выбор лучшей  - есть модель, никто не знает почему выбрали именно ее

Рецепт ML модели:
	 **Data** + **Code** + **Зависимости**


Почему плохо коммитить большие файлы в GIT:
 - При выполнении операции clone будут выкачиваться все версии всех
больших файлов со всех коммитов всех веток(и это будет работать
медленно)
- git не сможет оптимизировать хранение таких файлов (pack-файлы)

Где же все таки их хранить?
 - hadoop hdfs
 - Amazon S3
 - google cloud storage
 - ...

**Чек-лист воспроизводимости**
 - Знаем ли мы на каких данных была обучена  наша модель(можем ли их получить)?
 - Знаем ли какой версией кода была обучена модель?
 - Какие параметры передавались на вход модели?
 - Насколько хорошо была обучена модель?
 - Можем ли повторить обучение?
 - Есть ли связь между моделью на продакшеном и кодом, данными, параметрами, оффлайн оценками?

**ML metadata store**
Вместе с сериализованным файлом модели автоматически сохраняем:
	- ссылку на данные
	- ссылку на git repo и коммит в нем(либо релизной версии кода)
	- параметры
	- метрики
Называем папку modelname_v1, где-нибудь в вике указываем ссылку на все это дело:
- Какой пайплайн исполнялся
- Кто его исполнял
- Какие параметры были даны на вход
- Какие метрики и артефакты были на выходе
- input, output для каждой из стадий


# DVC
DVC (Data Version Control) - это система версионирования датасетов и не только, которая является надстройкой над git. 
Если передать под контроль DVC какие-то данные, то он начнет отслеживать все изменения. А мы можем работать с этими данными точно так же, как с Git: сохранять версию, отправлять в удалённый репозиторий, получать нужную версию данных, изменять и переключаться между версиями
![[Pasted image 20241029114642.png]]
dvc remote:
- Версии файлов хранятся локально, есть возможность делать checkout
- Есть возможность синхронизировать cache с удаленным специализированным хранилищем(dvc pull, dvc push)

Для каждого файла, которые версионируется в dvc есть файл `file_name.расширение.dvc` в котором указаны информация - хеш файла, ссылка откуда стягивают файл и тд



# MLFLOW

 MLFlow - это инструмент для управления всеми стадиями жизненного цикла модели машинного обучения. MLflow - это инструмент с открытым исходным кодом для разработки, сопровождения и взаимодействия на каждом этапе жизненного цикла ML-модели. Более того, MLflow является инструментом, не зависящим от фреймворка, поэтому любой ML/DL-фреймворк может быстро адаптироваться к экосистеме, которую предлагает MLflow.
 MLflow выступает в качестве платформы, предлагающей инструменты для отслеживания метрик, артефактов и метаданных. Она также предоставляет стандартные форматы для упаковки, распространения и развертывания моделей и проектов.
 MLflow также предлагает инструменты для управления версиями модели. Эти инструменты инкапсулированы в ее четырех основных компонентах:
- MLflow Tracking - это инструмент на основе API для регистрации метрик, параметров, версий моделей, кода и файлов.

- MLflow Models - позволяют упаковывать модели машинного обучения в стандартный формат для непосредственного использования через различные сервисы, такие как REST API, Microsoft Azure ML, Amazon SageMaker или Apache Spark. Для упаковки MLflow создает каталог с двумя файлами - моделью и файлом, в котором указаны детали упаковки и загрузки модели. Одним из преимуществ стандарта MLflow Models является то, что упаковка может быть осуществлена для нескольких языков (multi-language) или вариантов (вкусов) (multi-flavor).

- MLflow Projects - предоставляет стандартный формат для упаковки, обмена и повторного использования проектов машинного обучения. В отличие от MLflow Models, MLflow Projects ориентирован на удобство переноса и дистрибуции проектов машинного обучения. Проект MLflow определяется манифестом YAML под названием `MLProject`, в котором раскрываются спецификации проекта.